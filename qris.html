<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>QRIS Payment - Sehat dan Sikat</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Floating Navigation -->
  <nav class="floating-nav">
    <div class="nav-container">
      <div class="nav-logo">
        <div class="logo-circle">
          <span class="logo-text">S</span>
          <span class="logo-ampersand">&</span>
          <span class="logo-text">S</span>
        </div>
        <span class="logo-sub">Sehat dan Sikat</span>
      </div>
      <div class="nav-links">
        <a href="index.html"><i class="fas fa-home"></i> <span class="nav-text">Home</span></a>
        <a href="menu.html"><i class="fas fa-utensils"></i> <span class="nav-text">Menu</span></a>
        <a href="cart.html" class="cart-nav">
          <i class="fas fa-shopping-bag"></i>
          <span class="cart-badge" id="nav-cart-count">0</span>
          <span class="nav-text">Cart</span>
        </a>
      </div>
    </div>
  </nav>

  <main class="container">
    <div class="page-header">
      <h1>Pembayaran QRIS</h1>
      <p>Scan kode QR untuk menyelesaikan pembayaran</p>
    </div>
    
    <section class="qr-center">
      <div class="qr-card">
        <!-- Payment Summary -->
        <div class="qr-summary">
          <h3><i class="fas fa-receipt"></i> Detail Pembayaran</h3>
          <div class="summary-grid">
            <div class="summary-item">
              <span>Total</span>
              <span class="amount" id="order-total">Rp 0</span>
            </div>
            <div class="summary-item">
              <span>Metode</span>
              <span class="badge qris-badge">QRIS</span>
            </div>
            <div class="summary-item">
              <span>Status</span>
              <span class="status waiting">
                <i class="fas fa-clock"></i> Menunggu
              </span>
            </div>
          </div>
        </div>
        
        <!-- QR Code Display -->
        <div class="qr-display">
          <div class="qr-container">
            <div class="qr-code-box">
              <img src="img/qris.png" alt="QR Code" class="qr-image">
            </div>
            <div class="qr-info">
              <div class="merchant-name">Sehat dan Sikat</div>
              <div class="merchant-id">Merchant ID: SDS-001</div>
              <div class="qr-amount">
                <span>Jumlah:</span>
                <strong id="qr-amount">Rp 0</strong>
              </div>
            </div>
          </div>
          
          <!-- Timer -->
          <div class="qr-timer">
            <i class="fas fa-hourglass-half"></i>
            <span>Selesaikan dalam <strong id="timer">05:00</strong></span>
          </div>
        </div>
        
        <!-- Instructions -->
        <div class="qr-instructions">
          <h4><i class="fas fa-mobile-alt"></i> Cara Pembayaran</h4>
          
          <div class="instruction-grid">
            <div class="instruction-step">
              <div class="step-number">1</div>
              <div class="step-content">
                <strong>Buka aplikasi</strong>
                <p>DANA, OVO, GoPay, ShopeePay, LinkAja, atau mobile banking</p>
              </div>
            </div>
            
            <div class="instruction-step">
              <div class="step-number">2</div>
              <div class="step-content">
                <strong>Pilih Scan QR</strong>
                <p>Cari menu scan QR code di aplikasi Anda</p>
              </div>
            </div>
            
            <div class="instruction-step">
              <div class="step-number">3</div>
              <div class="step-content">
                <strong>Scan QR Code</strong>
                <p>Arahkan kamera ke kode di atas</p>
              </div>
            </div>
            
            <div class="instruction-step">
              <div class="step-number">4</div>
              <div class="step-content">
                <strong>Konfirmasi</strong>
                <p>Masukkan PIN atau verifikasi biometrik</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Tips -->
        <div class="qr-tips">
          <div class="tips-header">
            <i class="fas fa-lightbulb"></i>
            <h5>Tips Pembayaran</h5>
          </div>
          <ul class="tips-list">
            <li>Pastikan koneksi internet stabil</li>
            <li>Jaga jarak 15-30 cm saat scan</li>
            <li>Pastikan QR code terlihat jelas</li>
            <li>Verifikasi otomatis dalam 1-2 menit</li>
          </ul>
        </div>
        
        <!-- Actions -->
        <div class="qr-actions">
          <a href="payment.html" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Ganti Metode
          </a>
          <button class="btn btn-primary" onclick="simulatePayment()">
            <i class="fas fa-check-circle"></i> Saya Sudah Bayar
          </button>
        </div>
        
        <!-- Note -->
        <div class="qr-note">
          <i class="fas fa-info-circle"></i>
          <span>Pembayaran akan diverifikasi otomatis. Tidak perlu konfirmasi manual.</span>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Load cart count
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('restaurant_cart')) || [];
      const total = cart.reduce((sum, item) => sum + item.qty, 0);
      document.getElementById('nav-cart-count').textContent = total;
    }
    
    // Load order total
    function loadOrderTotal() {
      const total = localStorage.getItem('order_total') || 0;
      const formatted = parseInt(total).toLocaleString('id-ID');
      document.getElementById('order-total').textContent = `Rp ${formatted}`;
      document.getElementById('qr-amount').textContent = `Rp ${formatted}`;
    }
    
    // Timer countdown
    function startTimer() {
      let time = 300; // 5 minutes in seconds
      const timerEl = document.getElementById('timer');
      
      const interval = setInterval(() => {
        const minutes = Math.floor(time / 60);
        const seconds = time % 60;
        timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
        if (time <= 0) {
          clearInterval(interval);
          timerEl.textContent = "00:00";
          timerEl.style.color = "#ff4757";
        }
        time--;
      }, 1000);
    }
    
    function simulatePayment() {
      // Redirect to cart page to trigger thank you modal
      window.location.href = 'cart.html?qris=true';
    }
    
    // Initialize
    updateCartCount();
    loadOrderTotal();
    startTimer();
  </script>
</body>
</html>