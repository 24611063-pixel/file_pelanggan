<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Pembayaran - Sehat dan Sikat</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Floating Navigation -->
  <nav class="floating-nav">
    <div class="nav-container">
      <div class="nav-logo">
        <div class="logo-circle">
          <span class="logo-text">S</span>
          <span class="logo-ampersand">&</span>
          <span class="logo-text">S</span>
        </div>
        <span class="logo-sub">Sehat dan Sikat</span>
      </div>
      <div class="nav-links">
        <a href="index.html"><i class="fas fa-home"></i> <span class="nav-text">Home</span></a>
        <a href="menu.html"><i class="fas fa-utensils"></i> <span class="nav-text">Menu</span></a>
        <a href="cart.html" class="cart-nav">
          <i class="fas fa-shopping-bag"></i>
          <span class="cart-badge" id="nav-cart-count">0</span>
          <span class="nav-text">Cart</span>
        </a>
      </div>
    </div>
  </nav>

  <main class="container">
    <div class="page-header">
      <h1>Metode Pembayaran</h1>
      <p>Pilih cara pembayaran yang paling nyaman untuk Anda</p>
    </div>
    
    <section class="payment-center">
      <div class="payment-card">
        <!-- Order Summary -->
        <div class="order-summary">
          <h3><i class="fas fa-receipt"></i> Ringkasan Pesanan</h3>
          <div class="summary-details">
            <div class="detail-item">
              <span>Total Pesanan</span>
              <span class="amount" id="order-total">Rp 0</span>
            </div>
            <div class="detail-item">
              <span>Jumlah Item</span>
              <span id="item-count">0 item</span>
            </div>
          </div>
        </div>
        
        <!-- Payment Methods -->
        <h2 class="section-title">Pilih Metode</h2>
        
        <div class="payment-methods">
          <!-- QRIS Method -->
          <div class="method-option active" onclick="selectMethod('qris')" id="qris-method">
            <div class="method-select">
              <div class="select-circle">
                <i class="fas fa-check"></i>
              </div>
            </div>
            <div class="method-icon">
              <i class="fas fa-qrcode"></i>
            </div>
            <div class="method-content">
              <h4>QRIS Digital</h4>
              <p class="method-desc">Bayar dengan scan QR code</p>
              <div class="method-tags">
                <span>DANA</span>
                <span>OVO</span>
                <span>GoPay</span>
                <span>Bank</span>
              </div>
            </div>
          </div>
          
          <!-- Cash Method -->
          <div class="method-option" onclick="selectMethod('cash')" id="cash-method">
            <div class="method-select">
              <div class="select-circle">
                <i class="fas fa-check"></i>
              </div>
            </div>
            <div class="method-icon cash">
              <i class="fas fa-money-bill-wave"></i>
            </div>
            <div class="method-content">
              <h4>Tunai / Cash</h4>
              <p class="method-desc">Bayar langsung di kasir</p>
              <div class="method-note">
                <i class="fas fa-info-circle"></i>
                Siapkan uang pas saat pengambilan
              </div>
            </div>
          </div>
        </div>
        
        <!-- Instructions -->
        <div class="instructions-container">
          <!-- QRIS Instructions -->
          <div class="instruction-card active" id="qris-instruction">
            <div class="instruction-header">
              <i class="fas fa-qrcode"></i>
              <h4>Cara Bayar QRIS</h4>
            </div>
            <ol class="instruction-steps">
              <li><strong>Pilih QRIS</strong> di atas sebagai metode pembayaran</li>
              <li>Klik <strong>"Lanjut ke QR Code"</strong></li>
              <li><strong>Scan QR code</strong> yang muncul di halaman berikutnya</li>
              <li>Konfirmasi pembayaran di aplikasi e-wallet/mobile banking</li>
              <li>Tunggu verifikasi otomatis (1-2 menit)</li>
            </ol>
          </div>
          
          <!-- Cash Instructions -->
          <div class="instruction-card" id="cash-instruction">
            <div class="instruction-header">
              <i class="fas fa-money-bill-wave"></i>
              <h4>Cara Bayar Cash</h4>
            </div>
            <ol class="instruction-steps">
              <li><strong>Pilih Cash</strong> di atas sebagai metode pembayaran</li>
              <li>Klik <strong>"Konfirmasi Cash"</strong></li>
              <li><strong>Tunjukkan nomor pesanan</strong> Anda di kasir</li>
              <li>Bayar sesuai total yang tertera</li>
              <li>Tunggu notifikasi pesanan siap</li>
            </ol>
          </div>
        </div>
        
        <!-- Payment Actions -->
        <div class="payment-actions">
          <a href="cart.html" class="btn btn-back">
            <i class="fas fa-arrow-left"></i> Kembali
          </a>
          <button class="btn btn-pay" id="pay-button" onclick="processPayment()">
            <i class="fas fa-qrcode"></i> Lanjut ke QR Code
          </button>
        </div>
        
        <!-- Security Note -->
        <div class="security-note">
          <i class="fas fa-shield-alt"></i>
          <span>Transaksi Anda aman dan terenkripsi</span>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Current selected method
    let selectedMethod = 'qris';
    
    // Load cart count
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('restaurant_cart')) || [];
      const total = cart.reduce((sum, item) => sum + item.qty, 0);
      document.getElementById('nav-cart-count').textContent = total;
      document.getElementById('item-count').textContent = `${total} item`;
    }
    
    // Load order total
    function loadOrderTotal() {
      const total = localStorage.getItem('order_total') || 0;
      const formatted = parseInt(total).toLocaleString('id-ID');
      document.getElementById('order-total').textContent = `Rp ${formatted}`;
    }
    
    // Select payment method
    function selectMethod(method) {
      selectedMethod = method;
      
      // Update active states
      const qrisMethod = document.getElementById('qris-method');
      const cashMethod = document.getElementById('cash-method');
      const qrisInstruction = document.getElementById('qris-instruction');
      const cashInstruction = document.getElementById('cash-instruction');
      const payButton = document.getElementById('pay-button');
      
      if (method === 'qris') {
        qrisMethod.classList.add('active');
        cashMethod.classList.remove('active');
        qrisInstruction.classList.add('active');
        cashInstruction.classList.remove('active');
        
        payButton.innerHTML = '<i class="fas fa-qrcode"></i> Lanjut ke QR Code';
        payButton.className = 'btn btn-pay';
      } else {
        cashMethod.classList.add('active');
        qrisMethod.classList.remove('active');
        cashInstruction.classList.add('active');
        qrisInstruction.classList.remove('active');
        
        payButton.innerHTML = '<i class="fas fa-money-bill-wave"></i> Konfirmasi Cash';
        payButton.className = 'btn btn-pay cash';
      }
    }
    
    // Process payment
    function processPayment() {
      localStorage.setItem('payment_method', selectedMethod);
      
      if (selectedMethod === 'qris') {
        window.location.href = 'qris.html';
      } else {
        // For cash, trigger checkout directly
        window.location.href = 'cart.html?cash=true';
      }
    }
    
    // Initialize
    updateCartCount();
    loadOrderTotal();
  </script>
</body>
</html>